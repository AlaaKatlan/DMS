<!-- src/app/features/invoices/components/invoice-list/invoice-list.component.html -->
<div class="invoices-page" dir="rtl">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1 class="page-title">إدارة الفواتير</h1>
      <p class="page-subtitle">إدارة ومتابعة الفواتير المالية</p>
    </div>
    <button routerLink="/invoices/new" class="btn btn-primary">
      <lucide-angular name="plus" [size]="20"></lucide-angular>
      <span>فاتورة جديدة</span>
    </button>
  </div>

  <!-- Status Tabs -->
  <div class="status-tabs">
    <button
      *ngFor="let status of ['all', 'paid', 'unpaid', 'partially_paid', 'overdue']"
      (click)="statusFilter = status; applyFilter()"
      [class.active]="statusFilter === status"
    >
      {{ getStatusLabel(status) }}
    </button>
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>جاري تحميل الفواتير...</p>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && filteredInvoices.length === 0" class="empty-state">
    <lucide-angular name="file-question" [size]="64"></lucide-angular>
    <h3>لا توجد فواتير</h3>
    <p>{{ statusFilter !== 'all' ? 'لا توجد فواتير بهذه الحالة' : 'ابدأ بإضافة فاتورة جديدة' }}</p>
  </div>

  <!-- Invoices Table -->
  <div *ngIf="!loading && filteredInvoices.length > 0" class="invoices-table">
    <table>
      <thead>
        <tr>
          <th>رقم الفاتورة</th>
          <th>العميل</th>
          <th>تاريخ الإصدار</th>
          <th>تاريخ الاستحقاق</th>
          <th>المبلغ</th>
          <th>الحالة</th>
          <th>الإجراءات</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let inv of filteredInvoices">
          <td>
            <a [routerLink]="['/invoices', inv.id]">{{ inv.invoice_number }}</a>
          </td>
          <td>{{ inv.customer?.name || '-' }}</td>
          <td>{{ inv.issue_date | date:'dd/MM/yyyy' }}</td>
          <td>{{ inv.due_date | date:'dd/MM/yyyy' }}</td>
          <td>{{ inv.amount_due | number:'1.2-2' }} {{ inv.currency }}</td>
          <td>
            <span class="status-badge" [ngClass]="inv.status">
              {{ getStatusLabel(inv.status) }}
            </span>
          </td>
          <td>
            <div class="table-actions">
              <button [routerLink]="['/invoices', inv.id]">
                <lucide-angular name="eye" [size]="16"></lucide-angular>
                <span>عرض</span>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
