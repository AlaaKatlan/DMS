@use 'sass:color';

// Variables
$primary: #4F46E5;
$primary-light: #EEF2FF; // üëà ÿ™ŸÖÿ™ ÿ•ÿ∂ÿßŸÅÿ© Ÿáÿ∞ÿß ÿßŸÑŸÖÿ™ÿ∫Ÿäÿ± ÿßŸÑŸÖŸÅŸÇŸàÿØ
$secondary: #64748B;
$success: #10B981;
$bg-page: #F8FAFC;
$white: #FFFFFF;
$border: #E2E8F0;
$text-main: #1E293B;

@mixin hover-lift {
  transition: all 0.3s ease;
  &:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1);
  }
}

:host {
  display: block;
  min-height: 100vh;
  background-color: $bg-page;
}

.projects-page {
  padding: 2rem;
  max-width: 1600px;
  margin: 0 auto;
  @media (max-width: 768px) { padding: 1rem; }
}

.page-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;

  .page-title { font-size: 1.8rem; font-weight: 800; color: $text-main; margin: 0; }
  .page-subtitle { color: $secondary; margin-top: 0.5rem; }

  .btn-primary {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: $primary;
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 0.75rem;
    border: none;
    font-weight: 600;
    cursor: pointer;
    &:hover { background: color.adjust($primary, $lightness: -10%); }
  }
}

.filters-section {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  background: $white;
  padding: 1rem;
  border-radius: 1rem;
  border: 1px solid $border;
  margin-bottom: 2rem;
  align-items: center;

  .search-box {
    flex: 1;
    min-width: 250px;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: $bg-page;
    padding: 0.5rem 1rem;
    border-radius: 0.75rem;

    input {
      border: none;
      background: transparent;
      width: 100%;
      outline: none;
      color: $text-main;
    }
    lucide-angular { color: $secondary; }
  }

  .filters-group {
    display: flex;
    gap: 1rem;

    .status-tabs {
      display: flex;
      background: $bg-page;
      padding: 0.25rem;
      border-radius: 0.75rem;

      .tab-btn {
        border: none;
        background: transparent;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        color: $secondary;
        font-weight: 600;
        cursor: pointer;
        &.active { background: $white; color: $primary; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
      }
    }

    .view-toggles {
      display: flex;
      background: $bg-page;
      padding: 0.25rem;
      border-radius: 0.75rem;

      .btn-icon {
        border: none;
        background: transparent;
        padding: 0.5rem;
        color: $secondary;
        cursor: pointer;
        border-radius: 0.5rem;
        &.active { background: $white; color: $primary; }
      }
    }
  }
}

// Grid
.projects-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.5rem;

  .project-card {
    background: $white;
    border: 1px solid $border;
    border-radius: 1rem;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    @include hover-lift;

    .card-header {
      margin-bottom: 1.5rem;
      .header-top {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.75rem;
        .date-text { font-size: 0.8rem; color: $secondary; }
      }
      .project-title { margin: 0 0 0.5rem; font-size: 1.25rem; color: $text-main; cursor: pointer; &:hover { color: $primary; } }
      .customer-name { display: flex; align-items: center; gap: 0.4rem; color: $secondary; font-size: 0.9rem; }
    }

    .card-body {
      flex: 1;
      .financials {
        display: flex;
        justify-content: space-between;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid $border;
        .finance-item {
          display: flex;
          flex-direction: column;
          .label { font-size: 0.75rem; color: $secondary; }
          .value { font-weight: 700; color: $text-main; }
        }
      }
      .progress-section {
        .progress-labels { display: flex; justify-content: space-between; font-size: 0.8rem; margin-bottom: 0.25rem; color: $secondary; }
        .progress-bar-bg { height: 6px; background: $bg-page; border-radius: 3px; overflow: hidden; }
        .progress-bar-fill { height: 100%; background: $success; border-radius: 3px; }
      }
    }

    .card-footer {
      margin-top: 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;

      .btn-link {
        background: transparent; border: none; color: $primary; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 0.25rem;
        &:hover { gap: 0.5rem; }
      }

      .actions {
        display: flex; gap: 0.5rem;
        .icon-btn {
          border: none; background: transparent; cursor: pointer; color: $secondary;
          &:hover { color: $primary; }
          &.delete:hover { color: color.adjust($text-main, $lightness: 20%); } // Red override if needed
        }
      }
    }
  }
}

// Table
.projects-table-wrapper {
  background: $white;
  border-radius: 1rem;
  border: 1px solid $border;
  overflow-x: auto;

  .projects-table {
    width: 100%;
    border-collapse: collapse;
    white-space: nowrap;

    th { background: $bg-page; padding: 1rem; text-align: right; color: $secondary; font-size: 0.85rem; }
    td { padding: 1rem; border-bottom: 1px solid $border; color: $text-main; }
    tr:last-child td { border-bottom: none; }
    tr:hover { background: color.mix($white, $primary, 98%); }

    .project-name-cell { font-weight: 600; }

    .status-pill, .status-pill-sm {
      padding: 0.25rem 0.75rem; border-radius: 99px; font-size: 0.75rem; font-weight: 700;
      &.bg-blue-100 { background: color.mix($white, $primary, 90%); color: $primary; }
      &.bg-green-100 { background: color.mix($white, $success, 90%); color: color.adjust($success, $lightness: -10%); }
      &.bg-yellow-100 { background: #FEF3C7; color: #D97706; }
      &.bg-red-100 { background: #FEE2E2; color: #DC2626; }
    }

    .progress-mini {
      display: flex; align-items: center; gap: 0.5rem;
      .bar-bg { flex: 1; height: 4px; background: $border; border-radius: 2px; overflow: hidden; }
      .bar-fill { height: 100%; background: $success; }
    }

    .table-actions {
      display: flex; gap: 0.5rem;
      .btn-icon-sm {
        border: none; background: transparent; cursor: pointer; color: $secondary;
        &:hover { color: $primary; }
        &.danger:hover { color: #EF4444; }
      }
    }
  }
}

.loading-container, .empty-state { text-align: center; padding: 4rem; }
.spinner { width: 40px; height: 40px; border: 3px solid color.mix($white, $primary, 70%); border-top-color: $primary; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem; }
@keyframes spin { to { transform: rotate(360deg); } }

// Pagination Styles
.pagination-controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  margin-top: 2rem;
  padding-top: 1rem;
  border-top: 1px solid $border;

  .btn-page {
    width: 40px;
    height: 40px;
    border: 2px solid $border;
    background: $white;
    border-radius: 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    color: $secondary;

    &:hover:not(:disabled) {
      border-color: $primary;
      color: $primary;
      background: $primary-light; // ŸáŸÜÿß ŸÉÿßŸÜ ÿßŸÑÿÆÿ∑ÿ£ÿå ÿßŸÑÿ¢ŸÜ ÿ≥ŸäÿπŸÖŸÑ
    }

    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  }

  .page-info {
    font-weight: 600;
    color: $text-main;
  }
}
